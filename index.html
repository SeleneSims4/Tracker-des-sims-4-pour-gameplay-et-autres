<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sims 4 â€” Tracker de Progression FR</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Josefin+Sans:wght@100;300;400&family=Playfair+Display:ital@1&display=swap" rel="stylesheet">
<style>
:root {
  --noir: #08080e;
  --noir-doux: #0f0f1a;
  --violet-pastel: #c9b8e8;
  --violet-moyen: #9b7fcb;
  --violet-fonce: #4a2d7a;
  --violet-glow: #7c4dbe;
  --blanc: #f0ecff;
  --gris-verre: rgba(180,160,220,0.06);
  --or: #c8a96e;
  --vert: #5a9a56;
  --rouge: #c0464a;
  --border: rgba(201,184,232,0.1);
}
* { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior: smooth; }

body {
  background: var(--noir);
  color: var(--blanc);
  font-family: 'Josefin Sans', sans-serif;
  font-weight: 300;
  min-height: 100vh;
}

/* Grain */
body::before {
  content:''; position:fixed; inset:0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
  pointer-events:none; z-index:1000; opacity:0.5;
}

/* â”€â”€â”€ PROFILS â”€â”€â”€ */
#profile-bar {
  background: rgba(8,8,14,0.98);
  border-bottom: 1px solid var(--border);
  padding: .75rem 2rem;
  display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;
  position: sticky; top: 0; z-index: 200;
}
.profile-label {
  font-size:.55rem; letter-spacing:.3em; color:var(--violet-moyen);
  text-transform:uppercase; flex-shrink:0;
}
#profile-select {
  font-family:'Josefin Sans',sans-serif; font-size:.65rem;
  background:rgba(0,0,0,0.4); border:1px solid var(--border);
  color:var(--blanc); padding:.35rem .8rem; cursor:pointer;
  flex:1; min-width:150px; max-width:250px; outline:none;
}
#profile-select:focus { border-color:var(--violet-moyen); }
#profile-select option { background:#1a1a2e; }
.profile-btn {
  font-family:'Josefin Sans',sans-serif;
  font-size:.55rem; letter-spacing:.2em; text-transform:uppercase;
  padding:.35rem .8rem; border:1px solid var(--border);
  background:transparent; color:rgba(201,184,232,0.6);
  cursor:pointer; transition:all .2s; flex-shrink:0;
}
.profile-btn:hover { border-color:var(--violet-moyen); color:var(--violet-pastel); background:rgba(124,77,190,0.1); }
.profile-btn.danger { border-color:rgba(192,70,74,0.3); color:#e88; }
.profile-btn.danger:hover { background:rgba(192,70,74,0.1); }
.profile-active-name {
  font-family:'Cinzel Decorative',serif;
  font-size:.75rem; color:var(--violet-pastel);
  margin-left:auto; flex-shrink:0;
}
.profile-active-tag {
  font-size:.55rem; letter-spacing:.2em; color:var(--or);
  text-transform:uppercase; flex-shrink:0;
}

/* â”€â”€â”€ MODAL PROFIL â”€â”€â”€ */
#profile-modal {
  display:none; position:fixed; inset:0;
  background:rgba(0,0,0,0.85); z-index:9998;
  align-items:center; justify-content:center;
  backdrop-filter:blur(6px);
}
#profile-modal.show { display:flex; }
.modal-box {
  background:var(--noir-doux); border:1px solid var(--border);
  padding:2.5rem; max-width:480px; width:90%;
  position:relative; animation:fadeUp .3s ease;
}
.modal-box::before {
  content:''; position:absolute; top:0; left:0; right:0; height:2px;
  background:linear-gradient(90deg,var(--violet-fonce),var(--or),var(--violet-moyen));
}
.modal-title {
  font-family:'Cinzel Decorative',serif; font-size:1.1rem;
  color:var(--blanc); margin-bottom:1.5rem;
}
.modal-label {
  display:block; font-size:.58rem; letter-spacing:.3em;
  color:var(--violet-pastel); text-transform:uppercase; margin-bottom:.4rem;
}
.modal-input, .modal-select {
  width:100%; padding:.6rem 1rem;
  background:rgba(0,0,0,0.4); border:1px solid var(--border);
  color:var(--blanc); font-family:'Josefin Sans',sans-serif; font-size:.72rem;
  outline:none; margin-bottom:1rem; transition:border-color .2s;
}
.modal-input:focus, .modal-select:focus { border-color:var(--violet-moyen); }
.modal-select option { background:#1a1a2e; }
.modal-actions { display:flex; gap:.5rem; margin-top:.5rem; }
.modal-btn {
  flex:1; font-family:'Josefin Sans',sans-serif;
  font-size:.6rem; letter-spacing:.25em; text-transform:uppercase;
  padding:.6rem; border:1px solid var(--violet-moyen);
  background:rgba(124,77,190,0.15); color:var(--violet-pastel);
  cursor:pointer; transition:all .2s;
}
.modal-btn:hover { background:rgba(124,77,190,0.35); }
.modal-btn.cancel { border-color:var(--border); background:transparent; color:rgba(240,236,255,0.4); }
.modal-btn.cancel:hover { color:var(--blanc); }

/* â”€â”€â”€ HEADER â”€â”€â”€ */
header {
  text-align:center;
  padding: 2.5rem 2rem 1.5rem;
  background: radial-gradient(ellipse 80% 50% at 50% 0%, rgba(124,77,190,0.2) 0%, transparent 70%);
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(20px);
  background-color: rgba(8,8,14,0.92);
}
header h1 {
  font-family: 'Cinzel Decorative', serif;
  font-size: clamp(1.5rem,5vw,3rem);
  background: linear-gradient(135deg, #fff 0%, var(--violet-pastel) 50%, var(--violet-moyen) 100%);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
  margin-bottom:.5rem;
}
.header-sub { font-size:.65rem; letter-spacing:.4em; color:var(--violet-moyen); text-transform:uppercase; }

/* â”€â”€â”€ PROGRESS BAR â”€â”€â”€ */
.global-progress {
  max-width:600px; margin:1.5rem auto .5rem;
}
.progress-label {
  display:flex; justify-content:space-between;
  font-size:.6rem; letter-spacing:.3em; color:var(--violet-pastel); text-transform:uppercase; margin-bottom:.5rem;
}
.progress-bar {
  height:3px; background:rgba(201,184,232,0.1);
  position:relative;
}
.progress-fill {
  height:100%; background:linear-gradient(90deg,var(--violet-fonce),var(--violet-moyen));
  transition: width .5s ease;
  box-shadow: 0 0 10px rgba(124,77,190,0.5);
}

/* â”€â”€â”€ NAV â”€â”€â”€ */
nav {
  display:flex; flex-wrap:wrap; gap:.5rem; justify-content:center;
  padding:1rem 2rem; border-bottom:1px solid var(--border);
  background: rgba(8,8,14,0.95);
  position: sticky; top: 0; z-index: 99;
}
.nav-btn {
  font-family:'Josefin Sans',sans-serif;
  font-size:.58rem; letter-spacing:.3em; text-transform:uppercase;
  padding:.4rem 1rem; border:1px solid var(--border);
  background:transparent; color:rgba(201,184,232,0.6);
  cursor:pointer; transition:all .2s;
}
.nav-btn:hover, .nav-btn.active {
  border-color:var(--violet-moyen); color:var(--violet-pastel);
  background: rgba(124,77,190,0.1);
}

/* â”€â”€â”€ BOUTONS UTILITAIRES â”€â”€â”€ */
.util-bar {
  display:flex; gap:.8rem; flex-wrap:wrap; justify-content:center;
  padding:1rem 2rem;
  border-bottom:1px solid var(--border);
}
.util-btn {
  font-size:.58rem; letter-spacing:.25em; text-transform:uppercase;
  padding:.35rem .9rem; border:1px solid rgba(200,169,110,0.3);
  background:rgba(200,169,110,0.05); color:var(--or);
  cursor:pointer; transition:all .2s; font-family:'Josefin Sans',sans-serif;
}
.util-btn:hover { background:rgba(200,169,110,0.15); border-color:var(--or); }
.util-btn.danger { border-color:rgba(192,70,74,0.4); color:#e88; background:rgba(192,70,74,0.05); }
.util-btn.danger:hover { background:rgba(192,70,74,0.15); }

/* â”€â”€â”€ COLOR PICKER â”€â”€â”€ */
.color-opt {
  width:28px; height:28px; border-radius:50%; cursor:pointer;
  border:2px solid transparent; transition:all .2s;
}
.color-opt:hover { transform:scale(1.15); }
.color-opt.selected { border-color:#fff; transform:scale(1.2); }

/* â”€â”€â”€ MAIN â”€â”€â”€ */
main { max-width:1400px; margin:0 auto; padding:2rem; }

/* â”€â”€â”€ SECTION â”€â”€â”€ */
.tracker-section { margin-bottom:4rem; display:none; }
.tracker-section.active { display:block; }
.section-header {
  display:flex; align-items:baseline; gap:1.5rem;
  margin-bottom:2rem; padding-bottom:1rem;
  border-bottom:1px solid var(--border);
}
.section-title {
  font-family:'Cinzel Decorative',serif;
  font-size:clamp(1.2rem,3vw,1.8rem); color:var(--blanc);
}
.section-count {
  font-size:.6rem; letter-spacing:.3em; color:var(--violet-moyen); text-transform:uppercase;
}
.section-prog { margin-left:auto; }
.section-prog-bar {
  width:120px; height:2px; background:rgba(201,184,232,0.1);
}
.section-prog-fill {
  height:100%; background:linear-gradient(90deg,var(--violet-fonce),var(--violet-moyen));
  transition:width .4s ease;
}

/* â”€â”€â”€ GRILLE D'ITEMS â”€â”€â”€ */
.items-grid {
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(280px,1fr));
  gap:.75rem;
}
.items-grid.compact { grid-template-columns: repeat(auto-fill, minmax(220px,1fr)); }

/* â”€â”€â”€ ITEM CHECKBOX â”€â”€â”€ */
.item-check {
  display:flex; align-items:center; gap:.75rem;
  padding:.85rem 1rem;
  border:1px solid var(--border);
  background:var(--gris-verre);
  cursor:pointer; transition:all .25s;
  position:relative; overflow:hidden;
  user-select:none;
}
.item-check:hover { border-color:rgba(201,184,232,0.25); background:rgba(124,77,190,0.08); }
.item-check.done {
  border-color:rgba(90,154,86,0.4);
  background:rgba(90,154,86,0.08);
}
.item-check.done .item-name { color:rgba(90,154,86,0.9); text-decoration:line-through; text-decoration-color:rgba(90,154,86,0.4); }
.item-check::before {
  content:''; position:absolute; left:0; top:0; bottom:0; width:2px;
  background: linear-gradient(180deg,var(--violet-fonce),var(--violet-moyen));
  opacity:0; transition:opacity .25s;
}
.item-check.done::before { background:linear-gradient(180deg,#3d7a39,#5a9a56); opacity:1; }
.item-check:hover::before { opacity:1; }

.checkbox {
  width:18px; height:18px; flex-shrink:0;
  border:1px solid rgba(201,184,232,0.3);
  background:transparent;
  display:flex; align-items:center; justify-content:center;
  font-size:.7rem; transition:all .2s;
}
.item-check.done .checkbox {
  background:rgba(90,154,86,0.3); border-color:rgba(90,154,86,0.6); color:#7dbd79;
}

.item-info { flex:1; min-width:0; }
.item-name { font-size:.7rem; letter-spacing:.05em; color:var(--blanc); line-height:1.4; }
.item-pack { font-size:.55rem; letter-spacing:.2em; color:var(--violet-moyen); text-transform:uppercase; margin-top:.15rem; }

/* â”€â”€â”€ ITEM SKILL (slider niveau) â”€â”€â”€ */
.item-skill {
  padding:.85rem 1rem 1rem;
  border:1px solid var(--border);
  background:var(--gris-verre);
  transition:all .25s; position:relative;
}
.item-skill.maxed { border-color:rgba(90,154,86,0.4); background:rgba(90,154,86,0.06); }
.item-skill.maxed .item-name { color:rgba(90,154,86,0.9); }
.skill-top { display:flex; align-items:center; gap:.75rem; margin-bottom:.7rem; }
.skill-level {
  font-family:'Cinzel Decorative',serif;
  font-size:1.1rem; color:var(--violet-moyen); min-width:2rem;
  transition:color .2s;
}
.item-skill.maxed .skill-level { color:#5a9a56; }
.skill-bar {
  display:flex; gap:3px; margin-top:.5rem;
}
.skill-pip {
  flex:1; height:4px; background:rgba(201,184,232,0.1);
  cursor:pointer; transition:background .15s;
  border-radius:2px;
}
.skill-pip.filled { background:var(--violet-moyen); }
.item-skill.maxed .skill-pip.filled { background:#5a9a56; }
.skill-pip:hover { background:var(--violet-pastel) !important; }

/* â”€â”€â”€ SUBSECTION â”€â”€â”€ */
.subsection { margin-bottom:2.5rem; }
.subsection-title {
  font-size:.62rem; letter-spacing:.4em; color:var(--or);
  text-transform:uppercase; margin-bottom:1rem;
  padding-bottom:.5rem; border-bottom:1px solid rgba(200,169,110,0.15);
  display:flex; align-items:center; gap:.7rem;
}

/* â”€â”€â”€ TOAST â”€â”€â”€ */
#toast {
  position:fixed; bottom:2rem; left:50%; transform:translateX(-50%) translateY(100px);
  background:rgba(74,45,122,0.95); border:1px solid var(--violet-moyen);
  color:var(--violet-pastel); padding:.6rem 1.5rem;
  font-size:.65rem; letter-spacing:.2em; text-transform:uppercase;
  transition:transform .3s ease; z-index:9999; backdrop-filter:blur(10px);
  pointer-events:none;
}
#toast.show { transform:translateX(-50%) translateY(0); }

/* â”€â”€â”€ RESPONSIVE â”€â”€â”€ */
@media(max-width:600px) {
  .items-grid { grid-template-columns:1fr; }
  nav { gap:.3rem; }
  .nav-btn { font-size:.5rem; padding:.3rem .7rem; }
}
</style>
</head>
<body>

<!-- â•â•â• BARRE DE PROFILS â•â•â• -->
<div id="profile-bar">
  <span class="profile-label">Sim active :</span>
  <select id="profile-select" onchange="switchProfile(this.value)"></select>
  <button class="profile-btn" onclick="openModal('new')">+ Nouvelle Sim</button>
  <button class="profile-btn" onclick="openModal('edit')">âœï¸ Modifier</button>
  <button class="profile-btn danger" onclick="deleteProfile()">ğŸ—‘ï¸ Supprimer</button>
  <span class="profile-active-tag" id="profile-gameplay-tag"></span>
  <span class="profile-active-name" id="profile-active-display"></span>
</div>

<!-- â•â•â• MODAL NOUVEAU PROFIL â•â•â• -->
<div id="profile-modal">
  <div class="modal-box">
    <div class="modal-title" id="modal-title">âœ¨ Nouvelle Sim</div>

    <label class="modal-label">Nom de ta Sim</label>
    <input class="modal-input" id="modal-sim-name" type="text" placeholder="Ex : Selene, Aurora, Marcus...">

    <label class="modal-label">Type de Gameplay</label>
    <select class="modal-select" id="modal-gameplay">
      <option value="Super Sim">ğŸ† Super Sim â€” Tout complÃ©ter</option>
      <option value="Legacy">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Legacy â€” Plusieurs gÃ©nÃ©rations</option>
      <option value="100 BÃ©bÃ©s">ğŸ¼ Challenge 100 BÃ©bÃ©s</option>
      <option value="Occultiste">ğŸŒ™ Occultiste â€” Explorer les pouvoirs</option>
      <option value="CarriÃ¨re">ğŸ’¼ Focus CarriÃ¨re</option>
      <option value="Construction">ğŸ  Builder â€” Focus Construction</option>
      <option value="Richesse">ğŸ’° From Zero to Hero</option>
      <option value="Vampire">ğŸ§› Vampire Only</option>
      <option value="Sorcier">ğŸ§™ Sorcier Only</option>
      <option value="Garou">ğŸº Garou Only</option>
      <option value="Famille">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Vie de Famille</option>
      <option value="Romantique">â¤ï¸ Romantica / Soulmate</option>
      <option value="Freelance">ğŸ¨ Freelance & Arts</option>
      <option value="Exploration">ğŸŒ Exploration & Voyages</option>
      <option value="PersonnalisÃ©">âœï¸ PersonnalisÃ©</option>
    </select>

    <label class="modal-label">Notes / Commentaire libre</label>
    <input class="modal-input" id="modal-notes" type="text" placeholder="Ex : Save principale, monde Sulani, aime la pÃªche...">

    <label class="modal-label">Couleur du profil</label>
    <div style="display:flex; gap:.5rem; flex-wrap:wrap; margin-bottom:1rem;" id="color-picker">
      <div class="color-opt" data-color="#9b7fcb" style="background:#9b7fcb;" title="Violet"></div>
      <div class="color-opt" data-color="#c8a96e" style="background:#c8a96e;" title="Or"></div>
      <div class="color-opt" data-color="#5a9a56" style="background:#5a9a56;" title="Vert"></div>
      <div class="color-opt" data-color="#c0464a" style="background:#c0464a;" title="Rouge"></div>
      <div class="color-opt" data-color="#4a8ab0" style="background:#4a8ab0;" title="Bleu"></div>
      <div class="color-opt" data-color="#e87878" style="background:#e87878;" title="Rose"></div>
      <div class="color-opt" data-color="#78c8c8" style="background:#78c8c8;" title="Cyan"></div>
      <div class="color-opt" data-color="#c8784a" style="background:#c8784a;" title="Orange"></div>
    </div>

    <div class="modal-actions">
      <button class="modal-btn cancel" onclick="closeModal()">Annuler</button>
      <button class="modal-btn" onclick="saveProfile()">CrÃ©er la Sim â†’</button>
    </div>
  </div>
</div>

<header>
  <p class="header-sub">Sims 4 â€” Tracker Officiel</p>
  <h1>Progression de ta Sim</h1>
  <div class="global-progress">
    <div class="progress-label">
      <span>Progression globale</span>
      <span id="global-pct">0%</span>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="global-fill" style="width:0%"></div></div>
  </div>
</header>

<nav id="main-nav">
  <button class="nav-btn active" onclick="showSection('aspirations')">âœ¨ Aspirations</button>
  <button class="nav-btn" onclick="showSection('competences')">ğŸ“ˆ CompÃ©tences</button>
  <button class="nav-btn" onclick="showSection('carrieres')">ğŸ’¼ CarriÃ¨res</button>
  <button class="nav-btn" onclick="showSection('traits')">ğŸ† Traits RÃ©compense</button>
  <button class="nav-btn" onclick="showSection('diplomes')">ğŸ“ DiplÃ´mes</button>
  <button class="nav-btn" onclick="showSection('occultistes')">ğŸŒ™ Occultistes</button>
  <button class="nav-btn" onclick="showSection('jalons')">ğŸŒŸ Jalons de Vie</button>
  <button class="nav-btn" onclick="showSection('notoriete')">â­ NotoriÃ©tÃ©</button>
</nav>

<div class="util-bar">
  <button class="util-btn" onclick="saveData()">ğŸ’¾ Sauvegarder</button>
  <button class="util-btn" onclick="exportData()">ğŸ“¤ Exporter</button>
  <button class="util-btn" onclick="importData()">ğŸ“¥ Importer</button>
  <button class="util-btn danger" onclick="resetData()">ğŸ—‘ï¸ RÃ©initialiser</button>
</div>

<main>

<!-- â•â•â• ASPIRATIONS â•â•â• -->
<div class="tracker-section active" id="section-aspirations">
  <div class="section-header">
    <div class="section-title">âœ¨ Aspirations</div>
    <div class="section-count" id="count-aspirations">0 / 0</div>
    <div class="section-prog"><div class="section-prog-bar"><div class="section-prog-fill" id="prog-aspirations" style="width:0%"></div></div></div>
  </div>

  <div class="subsection">
    <div class="subsection-title">ğŸ® Jeu de base</div>
    <div class="items-grid" id="asp-base"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ“¦ Extensions & Accessoires</div>
    <div class="items-grid" id="asp-ext"></div>
  </div>
</div>

<!-- â•â•â• COMPÃ‰TENCES â•â•â• -->
<div class="tracker-section" id="section-competences">
  <div class="section-header">
    <div class="section-title">ğŸ“ˆ CompÃ©tences</div>
    <div class="section-count" id="count-competences">0 / 0</div>
    <div class="section-prog"><div class="section-prog-bar"><div class="section-prog-fill" id="prog-competences" style="width:0%"></div></div></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ® Jeu de base</div>
    <div class="items-grid" id="skill-base"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ“¦ Extensions</div>
    <div class="items-grid" id="skill-ext"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ‘¶ Enfants & Bambins</div>
    <div class="items-grid" id="skill-enfant"></div>
  </div>
</div>

<!-- â•â•â• CARRIÃˆRES â•â•â• -->
<div class="tracker-section" id="section-carrieres">
  <div class="section-header">
    <div class="section-title">ğŸ’¼ CarriÃ¨res</div>
    <div class="section-count" id="count-carrieres">0 / 0</div>
    <div class="section-prog"><div class="section-prog-bar"><div class="section-prog-fill" id="prog-carrieres" style="width:0%"></div></div></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ¢ CarriÃ¨res classiques</div>
    <div class="items-grid compact" id="car-classic"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ¯ CarriÃ¨res actives</div>
    <div class="items-grid compact" id="car-active"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ’ ActivitÃ©s parascolaires</div>
    <div class="items-grid compact" id="car-para"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ’° Freelance & IndÃ©pendant</div>
    <div class="items-grid compact" id="car-free"></div>
  </div>
</div>

<!-- â•â•â• TRAITS RÃ‰COMPENSE â•â•â• -->
<div class="tracker-section" id="section-traits">
  <div class="section-header">
    <div class="section-title">ğŸ† Traits RÃ©compense</div>
    <div class="section-count" id="count-traits">0 / 0</div>
    <div class="section-prog"><div class="section-prog-bar"><div class="section-prog-fill" id="prog-traits" style="width:0%"></div></div></div>
  </div>
  <div class="items-grid" id="traits-list"></div>
</div>

<!-- â•â•â• DIPLÃ”MES â•â•â• -->
<div class="tracker-section" id="section-diplomes">
  <div class="section-header">
    <div class="section-title">ğŸ“ DiplÃ´mes Universitaires</div>
    <div class="section-count" id="count-diplomes">0 / 0</div>
    <div class="section-prog"><div class="section-prog-bar"><div class="section-prog-fill" id="prog-diplomes" style="width:0%"></div></div></div>
  </div>
  <p style="font-size:.68rem; color:rgba(240,236,255,0.5); margin-bottom:1.5rem; font-style:italic;">Requiert : Vie Universitaire</p>
  <div class="items-grid" id="diplomes-list"></div>
</div>

<!-- â•â•â• OCCULTISTES â•â•â• -->
<div class="tracker-section" id="section-occultistes">
  <div class="section-header">
    <div class="section-title">ğŸŒ™ Pouvoirs Occultistes</div>
    <div class="section-count" id="count-occultistes">0 / 0</div>
    <div class="section-prog"><div class="section-prog-bar"><div class="section-prog-fill" id="prog-occultistes" style="width:0%"></div></div></div>
  </div>

  <div class="subsection">
    <div class="subsection-title">ğŸ§› Pouvoirs Vampires</div>
    <div class="items-grid compact" id="occ-vampire"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ§™ Pouvoirs Sorciers</div>
    <div class="items-grid compact" id="occ-sorcier"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸº Pouvoirs Garous</div>
    <div class="items-grid compact" id="occ-garou"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ‘» MaÃ®trise des FantÃ´mes</div>
    <div class="items-grid compact" id="occ-fantome"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ§š Pouvoirs des FÃ©es</div>
    <div class="items-grid compact" id="occ-fee"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ§œ Formes Occultistes</div>
    <div class="items-grid compact" id="occ-forme"></div>
  </div>
</div>

<!-- â•â•â• JALONS â•â•â• -->
<div class="tracker-section" id="section-jalons">
  <div class="section-header">
    <div class="section-title">ğŸŒŸ Jalons de Vie</div>
    <div class="section-count" id="count-jalons">0 / 0</div>
    <div class="section-prog"><div class="section-prog-bar"><div class="section-prog-fill" id="prog-jalons" style="width:0%"></div></div></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ  Vie & CarriÃ¨re</div>
    <div class="items-grid compact" id="jal-vie"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">â¤ï¸ Relations & Amour</div>
    <div class="items-grid compact" id="jal-amour"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ‘¶ Nourrissons & Bambins</div>
    <div class="items-grid compact" id="jal-bebe"></div>
  </div>
  <div class="subsection">
    <div class="subsection-title">ğŸ’ Enfants & Ados</div>
    <div class="items-grid compact" id="jal-enfant"></div>
  </div>
</div>

<!-- â•â•â• NOTORIÃ‰TÃ‰ â•â•â• -->
<div class="tracker-section" id="section-notoriete">
  <div class="section-header">
    <div class="section-title">â­ NotoriÃ©tÃ© & CÃ©lÃ©britÃ©</div>
    <div class="section-count" id="count-notoriete">0 / 0</div>
    <div class="section-prog"><div class="section-prog-bar"><div class="section-prog-fill" id="prog-notoriete" style="width:0%"></div></div></div>
  </div>
  <p style="font-size:.68rem; color:rgba(240,236,255,0.5); margin-bottom:1.5rem; font-style:italic;">Requiert : Heure de Gloire</p>
  <div class="items-grid" id="notoriete-list"></div>
</div>

</main>

<div id="toast">âœ“ SauvegardÃ©</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SYSTÃˆME DE PROFILS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

let currentProfileId = null;
let selectedColor = '#9b7fcb';
let editMode = false;

function getProfiles() {
  return JSON.parse(localStorage.getItem('sims4_profiles') || '{}');
}
function saveProfiles(profiles) {
  localStorage.setItem('sims4_profiles', JSON.stringify(profiles));
}

function initProfiles() {
  const profiles = getProfiles();
  // Si aucun profil, crÃ©er un profil par dÃ©faut
  if (Object.keys(profiles).length === 0) {
    const defaultId = 'sim_' + Date.now();
    profiles[defaultId] = {
      id: defaultId, name: 'Ma Sim', gameplay: 'Super Sim',
      notes: '', color: '#9b7fcb', createdAt: Date.now()
    };
    saveProfiles(profiles);
  }
  // Charger le dernier profil actif
  currentProfileId = localStorage.getItem('sims4_active_profile') || Object.keys(profiles)[0];
  if (!profiles[currentProfileId]) currentProfileId = Object.keys(profiles)[0];
  renderProfileSelect();
  updateProfileDisplay();
}

function renderProfileSelect() {
  const profiles = getProfiles();
  const sel = document.getElementById('profile-select');
  sel.innerHTML = '';
  Object.values(profiles).forEach(p => {
    const opt = document.createElement('option');
    opt.value = p.id;
    opt.textContent = `${p.name} â€” ${p.gameplay}`;
    opt.selected = p.id === currentProfileId;
    sel.appendChild(opt);
  });
}

function updateProfileDisplay() {
  const profiles = getProfiles();
  const p = profiles[currentProfileId];
  if (!p) return;
  document.getElementById('profile-active-display').textContent = p.name;
  document.getElementById('profile-active-display').style.color = p.color;
  document.getElementById('profile-gameplay-tag').textContent = p.gameplay;
  if (p.notes) {
    document.getElementById('profile-gameplay-tag').title = p.notes;
  }
}

function switchProfile(id) {
  currentProfileId = id;
  localStorage.setItem('sims4_active_profile', id);
  updateProfileDisplay();
  loadData();
  renderAll();
}

function openModal(mode) {
  editMode = mode === 'edit';
  const profiles = getProfiles();
  const p = profiles[currentProfileId];
  
  document.getElementById('modal-title').textContent = editMode ? 'âœï¸ Modifier la Sim' : 'âœ¨ Nouvelle Sim';
  document.querySelector('.modal-btn:last-child').textContent = editMode ? 'Enregistrer â†’' : 'CrÃ©er la Sim â†’';
  
  if (editMode && p) {
    document.getElementById('modal-sim-name').value = p.name;
    document.getElementById('modal-gameplay').value = p.gameplay;
    document.getElementById('modal-notes').value = p.notes || '';
    selectedColor = p.color;
  } else {
    document.getElementById('modal-sim-name').value = '';
    document.getElementById('modal-gameplay').value = 'Super Sim';
    document.getElementById('modal-notes').value = '';
    selectedColor = '#9b7fcb';
  }
  
  // Color picker
  document.querySelectorAll('.color-opt').forEach(el => {
    el.classList.toggle('selected', el.dataset.color === selectedColor);
    el.onclick = () => {
      selectedColor = el.dataset.color;
      document.querySelectorAll('.color-opt').forEach(e => e.classList.remove('selected'));
      el.classList.add('selected');
    };
  });

  document.getElementById('profile-modal').classList.add('show');
  document.getElementById('modal-sim-name').focus();
}

function closeModal() {
  document.getElementById('profile-modal').classList.remove('show');
}

function saveProfile() {
  const name = document.getElementById('modal-sim-name').value.trim();
  if (!name) { document.getElementById('modal-sim-name').style.borderColor='#e88'; return; }
  
  const profiles = getProfiles();
  if (editMode) {
    profiles[currentProfileId].name = name;
    profiles[currentProfileId].gameplay = document.getElementById('modal-gameplay').value;
    profiles[currentProfileId].notes = document.getElementById('modal-notes').value.trim();
    profiles[currentProfileId].color = selectedColor;
  } else {
    const newId = 'sim_' + Date.now();
    profiles[newId] = {
      id: newId, name, 
      gameplay: document.getElementById('modal-gameplay').value,
      notes: document.getElementById('modal-notes').value.trim(),
      color: selectedColor, createdAt: Date.now()
    };
    currentProfileId = newId;
    localStorage.setItem('sims4_active_profile', newId);
  }
  saveProfiles(profiles);
  renderProfileSelect();
  updateProfileDisplay();
  closeModal();
  showToast(editMode ? 'âœ“ Profil modifiÃ© !' : 'âœ“ Nouvelle Sim crÃ©Ã©e !');
  if (!editMode) { loadData(); renderAll(); }
}

function deleteProfile() {
  const profiles = getProfiles();
  if (Object.keys(profiles).length <= 1) {
    showToast('âš  Impossible de supprimer le seul profil');
    return;
  }
  const p = profiles[currentProfileId];
  if (!confirm(`Supprimer "${p.name}" et toute sa progression ? Cette action est irrÃ©versible.`)) return;
  
  // Supprimer les donnÃ©es de cette sim
  localStorage.removeItem('sims4_tracker_v2_' + currentProfileId);
  delete profiles[currentProfileId];
  saveProfiles(profiles);
  currentProfileId = Object.keys(profiles)[0];
  localStorage.setItem('sims4_active_profile', currentProfileId);
  renderProfileSelect();
  updateProfileDisplay();
  loadData(); renderAll();
  showToast('Profil supprimÃ©');
}

// Fermer modal en cliquant dehors
document.getElementById('profile-modal').addEventListener('click', function(e) {
  if (e.target === this) closeModal();
});

// â•â•â• DONNÃ‰ES â•â•â•

const DATA = {

  aspirations: {
    base: [
      {id:'asp_artiste', name:'GÃ©nie CrÃ©atif'}, {id:'asp_auteur', name:'Auteur Bestseller'},
      {id:'asp_musicien', name:'GÃ©nie Musical'}, {id:'asp_peintre', name:'Peintre Extraordinaire'},
      {id:'asp_ennemi', name:'Ennemi Public NÂ°1'}, {id:'asp_malice', name:'Chef de la Malveillance'},
      {id:'asp_val_sombre', name:'Valentin MenaÃ§ant'}, {id:'asp_pickpocket', name:'Doigts Collants'},
      {id:'asp_riche', name:'Fabuleux et Riche'}, {id:'asp_baron', name:'Baron des Manoirs'},
      {id:'asp_famille', name:'Grande Famille Heureuse'}, {id:'asp_lignee', name:'LignÃ©e RÃ©ussie'},
      {id:'asp_chef', name:'Chef Ã‰toilÃ©'}, {id:'asp_mixo', name:'MaÃ®tre Mixologue'},
      {id:'asp_fromage', name:'Grilled Cheese'}, {id:'asp_romance', name:'Romantique EffrÃ©nÃ©'},
      {id:'asp_amour', name:'Ã‚me SÅ“ur'}, {id:'asp_botaniste', name:'Botaniste Amateur'},
      {id:'asp_collectionneur', name:'Le Collectionneur'}, {id:'asp_pecheur', name:'As de la PÃªche'},
      {id:'asp_nerd', name:'Cerveau Analytique'}, {id:'asp_ordi', name:'Geek en Herbe'},
      {id:'asp_renaissance', name:'Sim Renaissance'}, {id:'asp_fete', name:'Animal de FÃªte'},
      {id:'asp_ami_monde', name:'Ami du Monde'}, {id:'asp_blague', name:'Roi de la Vanne'},
    ],
    ext: [
      {id:'asp_animaux', name:'Ami des Animaux', pack:'Chiens & Chats'},
      {id:'asp_muscu', name:'Culturiste', pack:'Jeu de base'},
      {id:'asp_extreme', name:'Sportif ExtrÃªme', pack:'Horizons Neigeux'},
      {id:'asp_cavalier', name:'Champion Ã‰questre', pack:'Ranch de chevaux'},
      {id:'asp_acteur', name:'MaÃ®tre Acteur/Actrice', pack:'Heure de Gloire'},
      {id:'asp_fabricant', name:'MaÃ®tre Fabricant', pack:'Mode Ã‰co'},
      {id:'asp_tricot', name:'MaÃ®tre du Tricot', pack:'Tricot CrÃ©atif'},
      {id:'asp_vampire_fam', name:'Famille de Vampires', pack:'Vampires'},
      {id:'asp_vampire_bien', name:'Bon Vampire', pack:'Vampires'},
      {id:'asp_vampire_maitre', name:'MaÃ®tre Vampire', pack:'Vampires'},
      {id:'asp_parent', name:'Super Parent', pack:'ParentalitÃ©'},
      {id:'asp_archeologie', name:'ArchÃ©ologue Ã‰rudit', pack:'Aventure dans la Jungle'},
      {id:'asp_magie', name:'Sorcellerie & Magie', pack:'Royaume de la Magie'},
      {id:'asp_universite', name:'AcadÃ©micien', pack:'Vie Universitaire'},
      {id:'asp_eco', name:'Innovateur Ã‰colo', pack:'Mode Ã‰co'},
      {id:'asp_celebrite', name:'CÃ©lÃ©britÃ© Mondiale', pack:'Heure de Gloire'},
      {id:'asp_strangerville', name:'MystÃ¨re StrangerVille', pack:'StrangerVille'},
      {id:'asp_plage', name:'Vie de Plage', pack:'Ãles Paradisiaques'},
      {id:'asp_montagne', name:'RandonnÃ©e au Komorebi', pack:'Horizons Neigeux'},
      {id:'asp_campagne', name:'Gardien de Campagne', pack:'Vie Ã  la Campagne'},
      {id:'asp_galaxie', name:'Privateer Galactique', pack:'Star Wars'},
      {id:'asp_garou_seul', name:'Loup Solitaire', pack:'Garous'},
      {id:'asp_garou_collectif', name:'Ã‰missaire du Collectif', pack:'Garous'},
      {id:'asp_fantome_hist', name:'Historien des FantÃ´mes', pack:'La Vie & la Mort'},
      {id:'asp_mentorat', name:'MaÃ®tre Mentor', pack:'Commerce & Loisirs'},
      {id:'asp_elixir', name:'PassionnÃ© d\'Ã‰lixirs', pack:'EnchantÃ©e par la Nature'},
      {id:'asp_fee_harmonie', name:'FÃ©e Harmonieuse', pack:'EnchantÃ©e par la Nature'},
      {id:'asp_fee_discorde', name:'FÃ©e Discordante', pack:'EnchantÃ©e par la Nature'},
      {id:'asp_chasseur_critter', name:'Chasseur de Bestioles', pack:'L\'Aventure vous attend'},
      {id:'asp_poterie', name:'MaÃ®tre Potier', pack:'Commerce & Loisirs'},
      {id:'asp_cristal', name:'Artisan Cristal', pack:'CrÃ©ations en Cristal'},
      {id:'asp_equitation', name:'Cavalier Champion', pack:'Ranch de Chevaux'},
      {id:'asp_nectar', name:'Expert Nectariseur', pack:'Ranch de Chevaux'},
      {id:'asp_apoth', name:'Apothicaire Naturel', pack:'EnchantÃ©e par la Nature'},
      {id:'asp_royaute', name:'Noble RoyautÃ©', pack:'RoyautÃ© & HÃ©ritage'},
    ]
  },

  competences: {
    base: [
      {id:'sk_charisme', name:'Charisme', max:10},
      {id:'sk_comedie', name:'ComÃ©die', max:10},
      {id:'sk_cuisine', name:'Cuisine', max:10},
      {id:'sk_peche', name:'PÃªche', max:10},
      {id:'sk_fitness', name:'Fitness', max:10},
      {id:'sk_jardinage', name:'Jardinage', max:10},
      {id:'sk_cuisine_gourmet', name:'Cuisine Gastronomique', max:10},
      {id:'sk_guitare', name:'Guitare', max:10},
      {id:'sk_bricolage', name:'Bricolage', max:10},
      {id:'sk_logique', name:'Logique', max:10},
      {id:'sk_malice', name:'Malice', max:10},
      {id:'sk_mixologie', name:'Mixologie', max:10},
      {id:'sk_peinture', name:'Peinture', max:10},
      {id:'sk_piano', name:'Piano', max:10},
      {id:'sk_photo', name:'Photographie', max:10},
      {id:'sk_programmation', name:'Programmation', max:10},
      {id:'sk_fusee', name:'Science des FusÃ©es', max:10},
      {id:'sk_video', name:'Jeux VidÃ©o', max:10},
      {id:'sk_violon', name:'Violon', max:10},
      {id:'sk_ecriture', name:'Ã‰criture', max:10},
    ],
    ext: [
      {id:'sk_herbalisme', name:'Herbalisme', max:10, pack:'Retraite en Plein Air'},
      {id:'sk_patisserie', name:'PÃ¢tisserie', max:10, pack:'Au Travail'},
      {id:'sk_bienetre', name:'Bien-Ãªtre', max:10, pack:'JournÃ©e au Spa'},
      {id:'sk_danse', name:'Danse', max:10, pack:'Se Regrouper'},
      {id:'sk_dj', name:'DJ', max:10, pack:'Se Regrouper'},
      {id:'sk_chant', name:'Chant', max:10, pack:'Vie en Ville'},
      {id:'sk_orgue', name:'Orgue Ã  Tuyaux', max:10, pack:'Vampires'},
      {id:'sk_lore_vampire', name:'Lore des Vampires', max:10, pack:'Vampires'},
      {id:'sk_bowling', name:'Bowling', max:10, pack:'SoirÃ©e Bowling'},
      {id:'sk_parentalite', name:'ParentalitÃ©', max:10, pack:'ParentalitÃ©'},
      {id:'sk_dressage', name:'Dressage Animaux', max:10, pack:'Chiens & Chats'},
      {id:'sk_veto', name:'VÃ©tÃ©rinaire', max:10, pack:'Chiens & Chats'},
      {id:'sk_archeo', name:'ArchÃ©ologie', max:10, pack:'Jungle'},
      {id:'sk_culture_selva', name:'Culture Selvadoradienne', max:10, pack:'Jungle'},
      {id:'sk_fleurs', name:'Art Floral', max:10, pack:'Saisons'},
      {id:'sk_jeu_acteur', name:'Art Dramatique', max:10, pack:'Heure de Gloire'},
      {id:'sk_media', name:'Production MÃ©dia', max:10, pack:'Heure de Gloire'},
      {id:'sk_debat', name:'Recherche & DÃ©bat', max:10, pack:'Vie Universitaire'},
      {id:'sk_robotique', name:'Robotique', max:10, pack:'Vie Universitaire'},
      {id:'sk_fabrication', name:'Fabrication', max:10, pack:'Mode Ã‰co'},
      {id:'sk_jus', name:'Fermentation', max:10, pack:'Mode Ã‰co'},
      {id:'sk_tricot', name:'Tricot', max:10, pack:'Tricot CrÃ©atif'},
      {id:'sk_escalade', name:'Escalade', max:10, pack:'Horizons Neigeux'},
      {id:'sk_ski', name:'Ski', max:10, pack:'Horizons Neigeux'},
      {id:'sk_snowboard', name:'Snowboard', max:10, pack:'Horizons Neigeux'},
      {id:'sk_medium', name:'MÃ©dium', max:10, pack:'Paranormal'},
      {id:'sk_broderie', name:'Broderie', max:10, pack:'Vie Ã  la Campagne'},
      {id:'sk_entrepreneur', name:'Entrepreneuriat', max:10, pack:'AnnÃ©es LycÃ©e'},
      {id:'sk_equitation', name:'Ã‰quitation', max:10, pack:'Ranch de Chevaux'},
      {id:'sk_nectar', name:'Nectarisation', max:10, pack:'Ranch de Chevaux'},
      {id:'sk_gemologie', name:'Gemmologie', max:10, pack:'CrÃ©ations en Cristal'},
      {id:'sk_romance', name:'Romance', max:10, pack:'Coup de Foudre'},
      {id:'sk_thanatologie', name:'Thanatologie', max:10, pack:'La Vie & la Mort'},
      {id:'sk_poterie', name:'Poterie', max:10, pack:'Commerce & Loisirs'},
      {id:'sk_tatouage', name:'Tatouage', max:10, pack:'Commerce & Loisirs'},
      {id:'sk_vie_naturelle', name:'Vie Naturelle', max:10, pack:'EnchantÃ©e par la Nature'},
      {id:'sk_apothicaire', name:'Apothicaire', max:10, pack:'EnchantÃ©e par la Nature'},
      {id:'sk_tir_arc', name:'Tir Ã  l\'Arc', max:10, pack:'L\'Aventure vous attend'},
      {id:'sk_papercraft', name:'Papercraft', max:10, pack:'L\'Aventure vous attend'},
      {id:'sk_plongee', name:'PlongÃ©e', max:10, pack:'L\'Aventure vous attend'},
      {id:'sk_entomologie', name:'Entomologie', max:10, pack:'L\'Aventure vous attend'},
      {id:'sk_epee', name:'Escrime', max:10, pack:'RoyautÃ© & HÃ©ritage'},
    ],
    enfant: [
      {id:'sk_creativite', name:'CrÃ©ativitÃ©', max:10},
      {id:'sk_mental', name:'Mental', max:10},
      {id:'sk_moteur', name:'MotricitÃ©', max:10},
      {id:'sk_social_enf', name:'Social', max:10},
      {id:'sk_imagination', name:'Imagination (bambin)', max:5},
      {id:'sk_communication', name:'Communication (bambin)', max:5},
      {id:'sk_proprete', name:'PropretÃ© (bambin)', max:3},
      {id:'sk_reflexion', name:'RÃ©flexion (bambin)', max:5},
      {id:'sk_mouvement', name:'Mouvement (bambin)', max:5},
    ]
  },

  carrieres: {
    classic: [
      {id:'car_astronaute', name:'Astronaute'},
      {id:'car_athlete', name:'AthlÃ¨te'},
      {id:'car_business', name:'Business'},
      {id:'car_criminel', name:'Criminel'},
      {id:'car_culinaire', name:'Culinaire'},
      {id:'car_animateur', name:'Animateur'},
      {id:'car_peintre', name:'Peintre'},
      {id:'car_agent', name:'Agent Secret'},
      {id:'car_styliste', name:'Influenceur de Style'},
      {id:'car_tech', name:'Gourou Tech'},
      {id:'car_ecrivain', name:'Ã‰crivain'},
      {id:'car_gardener', name:'Jardinier', pack:'Saisons'},
      {id:'car_acteur', name:'Acteur', pack:'Heure de Gloire'},
      {id:'car_militaire', name:'Militaire', pack:'StrangerVille'},
      {id:'car_conservateur', name:'Conservationniste', pack:'Ãles Paradisiaques'},
      {id:'car_education', name:'Ã‰ducation', pack:'Vie Universitaire'},
      {id:'car_ingenieur', name:'IngÃ©nieur', pack:'Vie Universitaire'},
      {id:'car_droit', name:'Droit', pack:'Vie Universitaire'},
      {id:'car_eco_civil', name:'Urbaniste', pack:'Mode Ã‰co'},
      {id:'car_salarie', name:'SalariÃ©', pack:'Horizons Neigeux'},
      {id:'car_deco', name:'DÃ©corateur IntÃ©rieur', pack:'DÃ©co de RÃªve'},
      {id:'car_critique', name:'Critique', pack:'Vie en Ville'},
      {id:'car_politique', name:'Politicien', pack:'Vie en Ville'},
      {id:'car_social_media', name:'RÃ©seaux Sociaux', pack:'Vie en Ville'},
      {id:'car_reaper', name:'Faucheur', pack:'La Vie & la Mort'},
      {id:'car_thanatologue', name:'Thanatologue', pack:'La Vie & la Mort'},
      {id:'car_naturopathe', name:'Naturopathe', pack:'EnchantÃ©e par la Nature'},
      {id:'car_noble', name:'Noble', pack:'RoyautÃ© & HÃ©ritage'},
    ],
    active: [
      {id:'car_detective', name:'DÃ©tective', pack:'Au Travail'},
      {id:'car_docteur', name:'Docteur', pack:'Au Travail'},
      {id:'car_scientifique', name:'Scientifique', pack:'Au Travail'},
      {id:'car_plongeur', name:'Plongeur', pack:'Ãles Paradisiaques'},
      {id:'car_pecheur_ile', name:'PÃªcheur', pack:'Ãles Paradisiaques'},
      {id:'car_sauveteur', name:'Sauveteur', pack:'Ãles Paradisiaques'},
      {id:'car_handy', name:'Homme Ã  Tout Faire', pack:'En Location'},
      {id:'car_romance_consul', name:'Consultant en Romance', pack:'Coup de Foudre'},
      {id:'car_parkworker', name:'Gardien de Parc', pack:'L\'Aventure vous attend'},
    ],
    para: [
      {id:'car_baby', name:'Baby-sitter'},
      {id:'car_barista', name:'Barista'},
      {id:'car_fastfood', name:'Fast Food'},
      {id:'car_manoeuvre', name:'ManÅ“uvre'},
      {id:'car_vendeur', name:'Vendeur'},
      {id:'car_simfluencer', name:'Simfluencer', pack:'AnnÃ©es LycÃ©e'},
      {id:'car_streamer', name:'Streamer Jeux VidÃ©o', pack:'AnnÃ©es LycÃ©e'},
      {id:'car_scout', name:'Scout', pack:'Saisons'},
      {id:'car_drama', name:'Cours de ThÃ©Ã¢tre', pack:'Heure de Gloire'},
      {id:'car_esport', name:'E-Sport', pack:'Vie Universitaire'},
      {id:'car_foot_univ', name:'Ã‰quipe de Football', pack:'Vie Universitaire'},
      {id:'car_cheer', name:'Cheerleader', pack:'AnnÃ©es LycÃ©e'},
      {id:'car_echecs', name:'Club d\'Ã‰checs', pack:'AnnÃ©es LycÃ©e'},
      {id:'car_ordi_lycee', name:'Club Informatique', pack:'AnnÃ©es LycÃ©e'},
      {id:'car_football_lycee', name:'Ã‰quipe de Football', pack:'AnnÃ©es LycÃ©e'},
    ],
    free: [
      {id:'car_free_prog', name:'Programmeur Freelance'},
      {id:'car_free_artiste', name:'Artiste Freelance'},
      {id:'car_free_ecrivain', name:'Ã‰crivain Freelance'},
      {id:'car_free_photo', name:'Photographe de Mode', pack:'Moschino'},
      {id:'car_free_fab', name:'Fabricant / Fermenteur / Chandelier', pack:'Mode Ã‰co'},
      {id:'car_paranormal_inv', name:'EnquÃªteur Paranormal', pack:'Paranormal'},
    ]
  },

  traits: [
    {id:'tr_bienvenu', name:'Toujours Bienvenu', cout:500},
    {id:'tr_gym', name:'Rat de Gym', cout:500},
    {id:'tr_observateur', name:'Observateur', cout:500},
    {id:'tr_nettoyage', name:'Nettoyage Rapide', cout:500},
    {id:'tr_conteur', name:'Grand Conteur', cout:500, pack:'Retraite'},
    {id:'tr_chaleur', name:'RÃ©sistant Ã  la Chaleur', cout:500, pack:'Saisons'},
    {id:'tr_froid', name:'RÃ©sistant au Froid', cout:500, pack:'Saisons'},
    {id:'tr_impermeable', name:'ImpermÃ©able', cout:500, pack:'Saisons'},
    {id:'tr_explorateur', name:'Explorateur InspirÃ©', cout:1000},
    {id:'tr_mentor', name:'Mentor', cout:1000},
    {id:'tr_matin', name:'LÃ¨ve-tÃ´t', cout:1000},
    {id:'tr_nuit', name:'Noctambule', cout:1000},
    {id:'tr_lecture', name:'Lecteur Rapide', cout:1000},
    {id:'tr_tempete', name:'Chasseur de TempÃªte', cout:1000, pack:'Saisons'},
    {id:'tr_services', name:'Services Gratuits', cout:1500},
    {id:'tr_vendable', name:'Vendable', cout:1500},
    {id:'tr_barbecue', name:'MaÃ®tre du Barbecue', cout:1500, pack:'Retraite'},
    {id:'tr_visionnaire', name:'Visionnaire CrÃ©atif', cout:2000},
    {id:'tr_entrepreneur', name:'Entrepreneur', cout:2000},
    {id:'tr_frugal', name:'Frugal', cout:2000},
    {id:'tr_independant', name:'IndÃ©pendant', cout:2000},
    {id:'tr_sans_honte', name:'Sans Vergogne', cout:2000},
    {id:'tr_vessie', name:'Vessie en Acier', cout:2000},
    {id:'tr_sympa', name:'Incroyablement Sympathique', cout:2000, pack:'Retraite'},
    {id:'tr_chaud_proof', name:'Ã€ l\'Ã‰preuve de la Chaleur', cout:2000, pack:'Saisons'},
    {id:'tr_glace_proof', name:'Ã€ l\'Ã‰preuve du Gel', cout:2000, pack:'Saisons'},
    {id:'tr_seduisant', name:'SÃ©duisant', cout:2500},
    {id:'tr_antiseptique', name:'Antiseptique', cout:3000},
    {id:'tr_desinvolte', name:'DÃ©sinvolte', cout:3000},
    {id:'tr_connections', name:'Connexions', cout:3000},
    {id:'tr_fertile', name:'Fertile', cout:3000},
    {id:'tr_grand_bisou', name:'Grand Bisou', cout:3000},
    {id:'tr_enqueteur', name:'Licence EnquÃªteur Paranormal', cout:3000, pack:'Paranormal'},
    {id:'tr_pas_faim', name:'Rarement Faim', cout:4000},
    {id:'tr_tire_au_flanc', name:'Tire-au-flanc Pro', cout:4000},
    {id:'tr_savant', name:'Savant', cout:4000},
    {id:'tr_pas_sommeil', name:'Dort Peu', cout:4000},
    {id:'tr_pouce_vert', name:'Super Pouce Vert', cout:4000},
    {id:'tr_solitaire', name:'N\'a Besoin de Personne', cout:5000},
    {id:'tr_courageux', name:'Courageux', cout:8000},
    {id:'tr_frais', name:'Toujours Frais', cout:8000},
    {id:'tr_toujours_rassasie', name:'Toujours RassasiÃ©', cout:10000},
    {id:'tr_jamais_fatigue', name:'Jamais FatiguÃ©', cout:10000},
    {id:'tr_vache_morte', name:'Vache Morte Non-Morte', cout:3000, pack:'La Vie & la Mort'},
    {id:'tr_enfance_aventure', name:'Enfance d\'Aventure', cout:100, pack:'L\'Aventure vous attend'},
  ],

  diplomes: [
    {id:'dip_histoire_art', name:'Histoire de l\'Art'},
    {id:'dip_biologie', name:'Biologie'},
    {id:'dip_communication', name:'Communication'},
    {id:'dip_informatique', name:'Informatique'},
    {id:'dip_arts_culinaires', name:'Arts Culinaires'},
    {id:'dip_theatre', name:'ThÃ©Ã¢tre'},
    {id:'dip_economie', name:'Ã‰conomie'},
    {id:'dip_beaux_arts', name:'Beaux-Arts'},
    {id:'dip_histoire', name:'Histoire'},
    {id:'dip_litterature', name:'Langue & LittÃ©rature'},
    {id:'dip_physique', name:'Physique'},
    {id:'dip_psycho', name:'Psychologie'},
    {id:'dip_sceleratesse', name:'ScÃ©lÃ©ratesse'},
  ],

  occultistes: {
    vampire: [
      {id:'vamp_detecter', name:'DÃ©tecter la PersonnalitÃ©'},
      {id:'vamp_chauve', name:'Forme Chauve-Souris'},
      {id:'vamp_hallucination', name:'Projeter une Hallucination'},
      {id:'vamp_bienvenu', name:'Ã‰ternellement Bienvenu'},
      {id:'vamp_creation', name:'CrÃ©ation de Vampires'},
      {id:'vamp_ail', name:'ImmunitÃ© Ã  l\'Ail'},
      {id:'vamp_commande', name:'Commandement'},
      {id:'vamp_force', name:'Force Vampirique'},
      {id:'vamp_charme', name:'Charme Vampirique'},
      {id:'vamp_mesmeriser', name:'MesmÃ©riser'},
      {id:'vamp_lune', name:'Enfant de la Lune'},
      {id:'vamp_sommeil', name:'Sommeil IrrÃ©sistible'},
      {id:'vamp_vie', name:'Manipuler l\'Esprit Vital'},
      {id:'vamp_sommeil2', name:'Sommeil Vampirique'},
      {id:'vamp_inodore', name:'Inodore'},
      {id:'vamp_soleil', name:'RÃ©sistance au Soleil'},
      {id:'vamp_besoins', name:'Priver des Besoins'},
      {id:'vamp_vitesse', name:'Vitesse Surnaturelle'},
      {id:'vamp_emotions', name:'Ã‰motions AttÃ©nuÃ©es'},
      {id:'vamp_plaisirs', name:'Plaisirs Immortels'},
      {id:'vamp_soif', name:'Soif ApprivoisÃ©e'},
      {id:'vamp_au_dela', name:'Au-DelÃ  du Troupeau'},
      {id:'vamp_brume', name:'Forme Brume'},
      {id:'vamp_influencer', name:'Influencer les Ã‰motions'},
    ],
    sorcier: [
      {id:'sorc_connaissance', name:'La Connaissance est Magie'},
      {id:'sorc_bras', name:'Bras de Mixeur'},
      {id:'sorc_decharge', name:'DÃ©charge'},
      {id:'sorc_herboriste', name:'Herboriste Incroyable'},
      {id:'sorc_experimentateur', name:'ExpÃ©rimentateur'},
      {id:'sorc_notes', name:'Chasseur de Motes'},
      {id:'sorc_frugal', name:'Combinaison Frugale'},
      {id:'sorc_puissance', name:'DÃ©rivation de Puissance'},
      {id:'sorc_perspicace', name:'Å’il Perspicace'},
      {id:'sorc_social', name:'Sorcier Social'},
      {id:'sorc_charge', name:'ContrÃ´le de Charge'},
      {id:'sorc_chimie', name:'Un Peu Plus de Chimie'},
      {id:'sorc_spectral', name:'PortÃ©e Spectrale'},
      {id:'sorc_pratique', name:'PraticitÃ© PratiquÃ©e'},
      {id:'sorc_malice', name:'MaÃ®tre de la Malice'},
      {id:'sorc_apprivoiser', name:'Apprivoiser l\'Indomptable'},
      {id:'sorc_hexproof', name:'RÃ©sistant aux MalÃ©dictions'},
      {id:'sorc_melange', name:'MaÃ®tre du MÃ©lange'},
      {id:'sorc_lanceur', name:'Lanceur de Sorts MaÃ®tre'},
      {id:'sorc_mentor_nat', name:'Mentor Naturel'},
      {id:'sorc_remise', name:'RÃ©ductions Magiques'},
      {id:'sorc_resonance', name:'RÃ©sonance Magique'},
      {id:'sorc_potions', name:'Potions Puissantes'},
      {id:'sorc_duel', name:'MaÃ®tre Duelliste'},
    ],
    garou: [
      {id:'gar_vitesse', name:'Super Vitesse'},
      {id:'gar_alpha', name:'Loup Alpha'},
      {id:'gar_immortel', name:'Loup Immortel'},
      {id:'gar_hurlement_lune', name:'Hurlement Lunaire'},
      {id:'gar_heritage', name:'HÃ©ritage du Lycanthrope'},
      {id:'gar_hurlement_vicieux', name:'Hurlement Vicieux'},
      {id:'gar_chasse', name:'Partie de Chasse'},
      {id:'gar_resistance', name:'RÃ©sistance Lunaire'},
      {id:'gar_tunnel', name:'Tunnelier'},
      {id:'gar_instincts', name:'Instincts Primaires'},
      {id:'gar_benediction', name:'BÃ©nÃ©diction Lunaire'},
      {id:'gar_vision', name:'Vision Nocturne'},
      {id:'gar_guerison', name:'GuÃ©rison Naturelle'},
      {id:'gar_meute', name:'Hurlement de Meute'},
      {id:'gar_porteur', name:'Porteur de MalÃ©diction'},
      {id:'gar_faim', name:'Faim Vorace'},
      {id:'gar_chasseur', name:'Chasseur'},
      {id:'gar_resistance2', name:'La VolontÃ© de RÃ©sister'},
      {id:'gar_odorat', name:'Odorat AmÃ©liorÃ©'},
      {id:'gar_hurlement_sombre', name:'Hurlement Sombre'},
      {id:'gar_ferocite', name:'FÃ©rocitÃ©'},
      {id:'gar_sieste', name:'Sieste de Loup'},
      {id:'gar_territoire', name:'Marquage du Territoire'},
      {id:'gar_charognard', name:'Charognard'},
      {id:'gar_toilettage', name:'Toilettage Personnel'},
    ],
    fantome: [
      {id:'fan_malediction', name:'MalÃ©diction Surnaturelle'},
      {id:'fan_levitation', name:'LÃ©vitation'},
      {id:'fan_cri', name:'Cri HantÃ©'},
      {id:'fan_objets', name:'Manipulation d\'Objets'},
      {id:'fan_spectacle', name:'Spectacle Fantomatique'},
      {id:'fan_devoreur', name:'DÃ©voreur'},
      {id:'fan_reves', name:'Corrupteur de RÃªves'},
      {id:'fan_presence', name:'PrÃ©sence Sombre'},
      {id:'fan_conjureur', name:'Conjurateur'},
      {id:'fan_endurance', name:'Endurance Puissante'},
      {id:'fan_transcendance', name:'Transcender les Besoins Vitaux'},
      {id:'fan_peur', name:'Craindre la Nuit'},
      {id:'fan_traverser', name:'TraversÃ©e Spectrale'},
      {id:'fan_sommeil_spec', name:'Sommeil Spectral'},
      {id:'fan_woohoo', name:'WooHoo Transcendant'},
      {id:'fan_benediction', name:'BÃ©nÃ©diction Bienveillante'},
      {id:'fan_gardien', name:'Gardien de l\'Au-delÃ '},
      {id:'fan_reves2', name:'Tisseur de RÃªves'},
      {id:'fan_presence2', name:'PrÃ©sence Euphorique'},
      {id:'fan_consolateur', name:'Consolateur'},
      {id:'fan_altruiste', name:'Soignant Altruiste'},
      {id:'fan_faucheur', name:'Complice du Faucheur'},
    ],
    fee: [
      {id:'fee_gnome', name:'Donner Vie Ã  un Gnome'},
      {id:'fee_vieillir', name:'Faire Vieillir un Autre'},
      {id:'fee_objet', name:'Manipuler un Objet'},
      {id:'fee_chance', name:'Changer la Chance'},
      {id:'fee_insight', name:'Intuition de FÃ©e'},
      {id:'fee_guerir', name:'GuÃ©rir ou Appliquer un Mal'},
      {id:'fee_sentiment', name:'Influencer un Sentiment'},
      {id:'fee_relation', name:'Influencer une Relation'},
      {id:'fee_emotion', name:'Projeter une Ã‰motion'},
      {id:'fee_bouteille', name:'Mettre en Bouteille une Ã‰motion'},
      {id:'fee_balancer', name:'Transmettre une Ã‰motion'},
      {id:'fee_transformer', name:'Se Transformer en FÃ©e'},
      {id:'fee_plante', name:'Faire Fleurir une Plante'},
      {id:'fee_recolte', name:'Sentir les RÃ©coltes'},
      {id:'fee_eruption', name:'Ã‰ruption de Croissance'},
      {id:'fee_fourrager', name:'Fourrager & Dupliquer'},
      {id:'fee_graine', name:'Manifester une Graine'},
      {id:'fee_nourrir', name:'Nourrir la Nature'},
      {id:'fee_regeneration', name:'RÃ©gÃ©nÃ©ration Experte'},
      {id:'fee_energique', name:'RÃªveur Ã‰nergique'},
      {id:'fee_resistance', name:'RÃ©sistance aux DÃ©bordements'},
      {id:'fee_sensibilite', name:'SensibilitÃ© aux DÃ©bordements'},
    ],
    forme: [
      {id:'forme_vampire', name:'Devenir Vampire', pack:'Vampires'},
      {id:'forme_sorcier', name:'Devenir Sorcier', pack:'Royaume de la Magie'},
      {id:'forme_garou', name:'Devenir Garou', pack:'Garous'},
      {id:'forme_sirene', name:'Devenir SirÃ¨ne', pack:'Ãles Paradisiaques'},
      {id:'forme_plante', name:'Devenir Sim Plante'},
      {id:'forme_alien', name:'Devenir Alien', pack:'Au Travail'},
      {id:'forme_fantome', name:'Mourir & Revenir FantÃ´me'},
      {id:'forme_fee', name:'Devenir FÃ©e', pack:'EnchantÃ©e par la Nature'},
      {id:'forme_non_occultiste', name:'Redevenir Humain'},
    ]
  },

  jalons: {
    vie: [
      {id:'jal_naissance', name:'Naissance'},
      {id:'jal_naissance_hop', name:'Naissance Ã  l\'HÃ´pital', pack:'Au Travail'},
      {id:'jal_naissance_maison', name:'Naissance Ã  la Maison'},
      {id:'jal_anniversaire', name:'CÃ©lÃ©brer un Anniversaire'},
      {id:'jal_adopte', name:'AdoptÃ©'},
      {id:'jal_adoption_famille', name:'Adopter un Membre de la Famille'},
      {id:'jal_premier_emploi', name:'Premier Emploi'},
      {id:'jal_premiere_promo', name:'PremiÃ¨re Promotion'},
      {id:'jal_sommet_carriere', name:'Atteindre le Sommet d\'une CarriÃ¨re'},
      {id:'jal_licencie', name:'LicenciÃ©'},
      {id:'jal_renvoye', name:'RenvoyÃ©'},
      {id:'jal_retraite', name:'Retraite'},
      {id:'jal_quitter', name:'Quitter un Emploi'},
      {id:'jal_decouverte', name:'Auto-DÃ©couverte'},
      {id:'jal_mort', name:'Mort'},
      {id:'jal_renaissance', name:'Renaissance !', pack:'La Vie & la Mort'},
      {id:'jal_loterie', name:'Gagner Ã  la Loterie', pack:'Saisons'},
      {id:'jal_foudre', name:'FrappÃ© par la Foudre', pack:'Saisons'},
      {id:'jal_vache', name:'MangÃ© par la Vache Ã  Lait'},
      {id:'jal_bebe_cheval', name:'Assister Ã  la Naissance d\'un Poulain', pack:'Ranch de Chevaux'},
      {id:'jal_nectar_trop', name:'Trop de Nectar', pack:'Ranch de Chevaux'},
      {id:'jal_alien_enleve', name:'EnlevÃ© par les Aliens', pack:'Au Travail'},
      {id:'jal_sixam', name:'Explorer Sixam', pack:'Au Travail'},
      {id:'jal_plante_mere', name:'Vaincre la Plante MÃ¨re', pack:'StrangerVille'},
      {id:'jal_plante_sim', name:'Devenir Sim Plante'},
      {id:'jal_crise_mi_vie', name:'Crise de la Mi-Vie'},
      {id:'jal_affaire_ami', name:'Avoir un Ami dans la Crypte', pack:'La Vie & la Mort'},
      {id:'jal_entreprise', name:'Enregistrer une Petite Entreprise', pack:'Commerce & Loisirs'},
      {id:'jal_vente_entreprise', name:'Vendre une Petite Entreprise', pack:'Commerce & Loisirs'},
      {id:'jal_premier_simoleon', name:'Premier Simoleon GagnÃ©', pack:'Commerce & Loisirs'},
      {id:'jal_tatouage_donne', name:'Premier Tatouage Fait', pack:'Commerce & Loisirs'},
      {id:'jal_tatouage_recu', name:'Premier Tatouage ReÃ§u', pack:'Commerce & Loisirs'},
    ],
    amour: [
      {id:'jal_premier_amour', name:'Tomber Amoureux'},
      {id:'jal_relation', name:'Commencer une Relation'},
      {id:'jal_fiancailles', name:'Se Fiancer'},
      {id:'jal_mariage', name:'Se Marier'},
      {id:'jal_veuf', name:'Veuf'},
      {id:'jal_rupture', name:'Rupture'},
      {id:'jal_refus_demande', name:'Demande en Mariage RefusÃ©e'},
      {id:'jal_infidele', name:'Pris en Flagrant DÃ©lit'},
      {id:'jal_tromperie', name:'Partenaire InfidÃ¨le'},
      {id:'jal_aventure', name:'Avoir une Aventure'},
      {id:'jal_bebe', name:'Avoir un BÃ©bÃ©'},
      {id:'jal_ressusciter', name:'Ressusciter un Sim'},
      {id:'jal_sauve', name:'SauvÃ© de la Mort'},
      {id:'jal_ennemi', name:'Se Faire un Ennemi'},
      {id:'jal_meilleur_ami', name:'Se Faire un Meilleur Ami'},
      {id:'jal_woohoo_grim', name:'WooHoo avec le Faucheur !', pack:'La Vie & la Mort'},
      {id:'jal_descendant_grim', name:'Avoir un Descendant du Faucheur', pack:'La Vie & la Mort'},
      {id:'jal_satisfaction_max', name:'Satisfaction Romantique Max', pack:'Coup de Foudre'},
      {id:'jal_satisfaction_min', name:'Satisfaction Romantique Min', pack:'Coup de Foudre'},
    ],
    bebe: [
      {id:'jal_nuit', name:'Dormir Toute la Nuit'},
      {id:'jal_premier_bain', name:'Premier Bain'},
      {id:'jal_premier_cauchemar', name:'Premier Cauchemar'},
      {id:'jal_pipi_garde', name:'Pipi sur le Gardien'},
      {id:'jal_premier_energie', name:'PremiÃ¨re Panne d\'Ã‰nergie'},
      {id:'jal_couche', name:'PremiÃ¨re Couche Explosive'},
      {id:'jal_solide', name:'Premier Aliment Solide'},
      {id:'jal_biberon', name:'Premier Biberon'},
      {id:'jal_bain_bulles', name:'Premier Bain Ã  Bulles'},
      {id:'jal_doigt', name:'Doigt en Bouche'},
      {id:'jal_ramper_ventre', name:'RampÃ© sur le Ventre'},
      {id:'jal_ramper', name:'Apprendre Ã  Ramper'},
      {id:'jal_asseoir', name:'Se Tenir Assis'},
      {id:'jal_debout', name:'Se Lever'},
      {id:'jal_retourner_dos', name:'Se Retourner sur le Dos'},
      {id:'jal_retourner_ventre', name:'Se Retourner sur le Ventre'},
      {id:'jal_tete', name:'Lever la TÃªte'},
      {id:'jal_pincer', name:'Prise en Pince'},
      {id:'jal_attraper', name:'Attraper'},
      {id:'jal_tendre', name:'Tendre les Bras'},
      {id:'jal_agiter', name:'Agiter les Bras'},
      {id:'jal_sourire', name:'Premier Sourire'},
      {id:'jal_peekaboo', name:'Apprendre le Coucou'},
      {id:'jal_babiller', name:'Babiller'},
      {id:'jal_bisou', name:'Envoyer des Bisous'},
      {id:'jal_framboise', name:'Faire une Framboise'},
      {id:'jal_rire', name:'Rire'},
      {id:'jal_parler', name:'Apprendre Ã  Parler'},
      {id:'jal_premier_mot', name:'Premier Mot'},
      {id:'jal_marcher', name:'Apprendre Ã  Marcher'},
      {id:'jal_danser', name:'Danser'},
      {id:'jal_courir', name:'Courir'},
      {id:'jal_escaliers', name:'Monter les Escaliers'},
    ],
    enfant: [
      {id:'jal_phase_enfance', name:'Phase d\'Enfance', pack:'ParentalitÃ©'},
      {id:'jal_premier_ecole', name:'Premier Jour d\'Ã‰cole'},
      {id:'jal_puberte', name:'DÃ©but de la PubertÃ©', pack:'AnnÃ©es LycÃ©e'},
      {id:'jal_ami_enfance', name:'Premier Ami d\'Enfance'},
      {id:'jal_lire', name:'Lire son Premier Livre'},
      {id:'jal_dent', name:'Perdre sa PremiÃ¨re Dent'},
      {id:'jal_tantrum', name:'Faire une Crise'},
      {id:'jal_velo', name:'Apprendre Ã  Faire du VÃ©lo'},
      {id:'jal_pot', name:'MaÃ®triser le Pot'},
      {id:'jal_creche', name:'PremiÃ¨re Fois Ã  la CrÃ¨che'},
      {id:'jal_lycee_diplome', name:'DiplÃ´me du LycÃ©e', pack:'AnnÃ©es LycÃ©e'},
      {id:'jal_lycee_abandon', name:'Abandon du LycÃ©e', pack:'AnnÃ©es LycÃ©e'},
      {id:'jal_lycee_exclu', name:'Exclusion du LycÃ©e', pack:'AnnÃ©es LycÃ©e'},
      {id:'jal_prom', name:'Reine/Roi du Bal', pack:'AnnÃ©es LycÃ©e'},
      {id:'jal_premiere_betise', name:'PremiÃ¨re BÃªtise'},
      {id:'jal_premiere_visite', name:'PremiÃ¨re Visite en Famille'},
      {id:'jal_vacances', name:'PremiÃ¨re Vacances'},
      {id:'jal_parc', name:'Premier Voyage au Parc'},
      {id:'jal_univers_diplome', name:'Obtenir un DiplÃ´me Universitaire', pack:'Vie Universitaire'},
    ]
  },

  notoriete: [
    {id:'not_complot', name:'Fauteur de Troubles'},
    {id:'not_marque', name:'Marque Personnelle'},
    {id:'not_equipe', name:'Ã‰quipe'},
    {id:'not_facile', name:'La Belle Vie'},
    {id:'not_traitement', name:'Traitement de Star'},
    {id:'not_mechant', name:'Jouer le MÃ©chant'},
    {id:'not_pionnier', name:'Pionnier'},
    {id:'not_amis_instantanes', name:'Amis InstantanÃ©s'},
    {id:'not_chameleon', name:'CamÃ©lÃ©on de CarriÃ¨re'},
    {id:'not_rally', name:'Rally !'},
    {id:'not_mauvais', name:'Qui est le MÃ©chant'},
    {id:'not_nuit_blanche', name:'Nuit Blanche'},
    {id:'not_favori', name:'Favori des Fans'},
    {id:'not_nom_etabli', name:'Nom Ã‰tabli'},
    {id:'not_don', name:'Donner en Retour'},
    {id:'not_influenceur', name:'Influenceur'},
    {id:'not_rp', name:'Agence RP'},
    {id:'not_serum', name:'CÃ©lÃ©buSÃ©rum'},
    {id:'not_partenariat', name:'Partenariat d\'Entreprise'},
    {id:'not_reseau', name:'RÃ©seautage'},
    {id:'not_remarquable', name:'Remarquable'},
  ]
};

// â•â•â• Ã‰TAT â•â•â•
let state = {};

function loadData() {
  try {
    const key = 'sims4_tracker_v2_' + (currentProfileId || 'default');
    const saved = localStorage.getItem(key);
    state = saved ? JSON.parse(saved) : {};
  } catch(e) { state = {}; }
}

function saveData() {
  const key = 'sims4_tracker_v2_' + (currentProfileId || 'default');
  localStorage.setItem(key, JSON.stringify(state));
  showToast('âœ“ SauvegardÃ© !');
}

function exportData() {
  const profiles = getProfiles();
  const p = profiles[currentProfileId];
  const blob = new Blob([JSON.stringify(state, null, 2)], {type:'application/json'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = `sims4_${p ? p.name.replace(/\s/g,'_') : 'progression'}.json`;
  a.click();
}

function importData() {
  const input = document.createElement('input');
  input.type = 'file'; input.accept = '.json';
  input.onchange = e => {
    const reader = new FileReader();
    reader.onload = ev => {
      try {
        state = JSON.parse(ev.target.result);
        saveData();
        renderAll();
        showToast('âœ“ ImportÃ© !');
      } catch(e) { showToast('âš  Fichier invalide'); }
    };
    reader.readAsText(e.target.files[0]);
  };
  input.click();
}

function resetData() {
  if (confirm('RÃ©initialiser toute ta progression ? Cette action est irrÃ©versible.')) {
    state = {};
    saveData();
    renderAll();
    showToast('Progression rÃ©initialisÃ©e');
  }
}

// â•â•â• RENDU â•â•â•
function mkCheck(item, section) {
  const done = !!state[item.id];
  const d = document.createElement('div');
  d.className = 'item-check' + (done ? ' done' : '');
  d.innerHTML = `
    <div class="checkbox">${done ? 'âœ“' : ''}</div>
    <div class="item-info">
      <div class="item-name">${item.name}</div>
      ${item.pack ? `<div class="item-pack">${item.pack}</div>` : ''}
      ${item.cout ? `<div class="item-pack">${item.cout} pts</div>` : ''}
    </div>`;
  d.onclick = () => {
    state[item.id] = !state[item.id];
    d.classList.toggle('done');
    d.querySelector('.checkbox').textContent = state[item.id] ? 'âœ“' : '';
    d.querySelector('.item-name').style.textDecoration = state[item.id] ? 'line-through' : '';
    saveData();
    updateCounts();
  };
  return d;
}

function mkSkill(item) {
  const level = state[item.id] || 0;
  const maxed = level >= item.max;
  const d = document.createElement('div');
  d.className = 'item-skill' + (maxed ? ' maxed' : '');
  d.innerHTML = `
    <div class="skill-top">
      <div class="skill-level">${level}</div>
      <div class="item-info">
        <div class="item-name">${item.name}</div>
        ${item.pack ? `<div class="item-pack">${item.pack}</div>` : ''}
      </div>
    </div>
    <div class="skill-bar">${Array.from({length: item.max}, (_,i) =>
      `<div class="skill-pip${i < level ? ' filled' : ''}" data-pip="${i+1}"></div>`
    ).join('')}</div>`;
  
  d.querySelectorAll('.skill-pip').forEach(pip => {
    pip.onclick = (e) => {
      e.stopPropagation();
      const val = parseInt(pip.dataset.pip);
      const current = state[item.id] || 0;
      state[item.id] = current === val ? val - 1 : val;
      d.querySelector('.skill-level').textContent = state[item.id];
      d.querySelectorAll('.skill-pip').forEach((p,i) => {
        p.classList.toggle('filled', i < state[item.id]);
      });
      d.classList.toggle('maxed', state[item.id] >= item.max);
      saveData();
      updateCounts();
    };
  });
  return d;
}

function renderSection(containerId, items, type='check') {
  const el = document.getElementById(containerId);
  if (!el) return;
  el.innerHTML = '';
  items.forEach(item => {
    el.appendChild(type === 'skill' ? mkSkill(item) : mkCheck(item, containerId));
  });
}

function renderAll() {
  // Aspirations
  renderSection('asp-base', DATA.aspirations.base);
  renderSection('asp-ext', DATA.aspirations.ext);
  // CompÃ©tences
  renderSection('skill-base', DATA.competences.base, 'skill');
  renderSection('skill-ext', DATA.competences.ext, 'skill');
  renderSection('skill-enfant', DATA.competences.enfant, 'skill');
  // CarriÃ¨res
  renderSection('car-classic', DATA.carrieres.classic);
  renderSection('car-active', DATA.carrieres.active);
  renderSection('car-para', DATA.carrieres.para);
  renderSection('car-free', DATA.carrieres.free);
  // Traits
  renderSection('traits-list', DATA.traits);
  // DiplÃ´mes
  renderSection('diplomes-list', DATA.diplomes);
  // Occultistes
  renderSection('occ-vampire', DATA.occultistes.vampire);
  renderSection('occ-sorcier', DATA.occultistes.sorcier);
  renderSection('occ-garou', DATA.occultistes.garou);
  renderSection('occ-fantome', DATA.occultistes.fantome);
  renderSection('occ-fee', DATA.occultistes.fee);
  renderSection('occ-forme', DATA.occultistes.forme);
  // Jalons
  renderSection('jal-vie', DATA.jalons.vie);
  renderSection('jal-amour', DATA.jalons.amour);
  renderSection('jal-bebe', DATA.jalons.bebe);
  renderSection('jal-enfant', DATA.jalons.enfant);
  // NotoriÃ©tÃ©
  renderSection('notoriete-list', DATA.notoriete);

  updateCounts();
}

function getSectionStats(ids) {
  const allIds = ids.flat();
  const done = allIds.filter(id => {
    if (id.startsWith('sk_') || id.startsWith('occ_') ) {
      return (state[id] || 0) >= 1;
    }
    return !!state[id];
  }).length;
  return {done, total: allIds.length};
}

function getSkillDone(items) {
  return items.filter(item => (state[item.id] || 0) >= item.max).length;
}

function updateCounts() {
  const sections = {
    aspirations: [...DATA.aspirations.base, ...DATA.aspirations.ext].map(i=>i.id),
    competences: null,
    carrieres: [...DATA.carrieres.classic, ...DATA.carrieres.active, ...DATA.carrieres.para, ...DATA.carrieres.free].map(i=>i.id),
    traits: DATA.traits.map(i=>i.id),
    diplomes: DATA.diplomes.map(i=>i.id),
    occultistes: [...DATA.occultistes.vampire,...DATA.occultistes.sorcier,...DATA.occultistes.garou,...DATA.occultistes.fantome,...DATA.occultistes.fee,...DATA.occultistes.forme].map(i=>i.id),
    jalons: [...DATA.jalons.vie,...DATA.jalons.amour,...DATA.jalons.bebe,...DATA.jalons.enfant].map(i=>i.id),
    notoriete: DATA.notoriete.map(i=>i.id),
  };

  let globalDone = 0, globalTotal = 0;

  Object.keys(sections).forEach(key => {
    let done, total;
    if (key === 'competences') {
      const all = [...DATA.competences.base,...DATA.competences.ext,...DATA.competences.enfant];
      done = getSkillDone(all);
      total = all.length;
    } else {
      const ids = sections[key];
      done = ids.filter(id => !!state[id]).length;
      total = ids.length;
    }
    const countEl = document.getElementById('count-'+key);
    const progEl = document.getElementById('prog-'+key);
    if (countEl) countEl.textContent = `${done} / ${total}`;
    if (progEl) progEl.style.width = total ? `${(done/total)*100}%` : '0%';
    globalDone += done;
    globalTotal += total;
  });

  const pct = globalTotal ? Math.round((globalDone/globalTotal)*100) : 0;
  document.getElementById('global-pct').textContent = pct + '%';
  document.getElementById('global-fill').style.width = pct + '%';
}

// â•â•â• NAVIGATION â•â•â•
function showSection(name) {
  document.querySelectorAll('.tracker-section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('section-'+name).classList.add('active');
  event.target.classList.add('active');
}

// â•â•â• TOAST â•â•â•
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}

// â•â•â• AUTO-SAVE â•â•â•
setInterval(() => {
  const key = 'sims4_tracker_v2_' + (currentProfileId || 'default');
  localStorage.setItem(key, JSON.stringify(state));
}, 30000);

// â•â•â• INIT â•â•â•
initProfiles();
loadData();
renderAll();
</script>
</body>
</html>
